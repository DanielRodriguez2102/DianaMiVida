
:root {
  --font-ui: system-ui, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-caption: "Georgia", "Times New Roman", serif;

  /* Tema por defecto (rose) */
  --background-top: #0b1020;
  --background-bottom: #0f1c33;
  --accent: #ff6b8a;
  --accent-soft: rgba(255,107,138,0.18);
  --glow: rgba(255,107,138,0.28);
  --text-muted: rgba(255,255,255,0.78);

  --panel-bg: rgba(20,20,30,0.48);
  --panel-border: rgba(255,255,255,0.18);

  --card-w: clamp(180px, 24vmin, 300px);
  --card-ratio: 1/1;
  --gallery-gap: 18px;
}

/* Temas alternativos — el JS alterna data-theme="rose|aurora|midnight" */
body[data-theme="aurora"] {
  --background-top: #0b1330;
  --background-bottom: #12204a;
  --accent: #ff7ab3;
  --accent-soft: rgba(255,122,179,0.20);
  --glow: rgba(255,122,179,0.30);
}
body[data-theme="midnight"] {
  --background-top: #0a1020;
  --background-bottom: #0e1a33;
  --accent: #6fb7ff;
  --accent-soft: rgba(111,183,255,0.20);
  --glow: rgba(111,183,255,0.30);

}

body[data-theme="spring"] {
  --background-top: #0e1c2a;          /* azul verdoso suave */
  --background-bottom: #163540;       /* teal profundo */
  --accent: #7ad36b;                  /* verde brote */
  --accent-soft: rgba(122,211,107,0.24);
  --glow: rgba(180,235,160,0.34);
  --text-muted: rgba(235,255,245,0.90);

  /* opcional: pétalos/hojas */
  --leaf-color: rgba(122,211,107,0.6);
}

body[data-theme="summer"] {
  --background-top: #0b2036;          /* azul marino vibrante */
  --background-bottom: #15385e;       /* azul océano */
  --accent: #ffb454;                  /* sol dorado */
  --accent-soft: rgba(255,180,84,0.24);
  --glow: rgba(255,210,120,0.36);
  --text-muted: rgba(255,248,235,0.90);
}

body[data-theme="autumn"] {
  --background-top: #12151e;          /* gris azulado noche */
  --background-bottom: #2a2233;       /* púrpura humo */
  --accent: #ff8a3d;                  /* naranja hoja */
  --accent-soft: rgba(255,138,61,0.24);
  --glow: rgba(255,193,120,0.34);
  --text-muted: rgba(255,240,225,0.90);

  /* opcional: hojas */
  --leaf-color: rgba(255,138,61,0.6);
}
body[data-theme="winter"] {
  --background-top: #0a121e;          /* azul gélido */
  --background-bottom: #14233a;       /* azul noche invernal */
  --accent: #6ec1ff;                  /* azul hielo */
  --accent-soft: rgba(110,193,255,0.22);
  --glow: rgba(180,220,255,0.34);
  --text-muted: rgba(230,245,255,0.90);
}

body[data-theme="halloween"] {
  --background-top: #0a0a12;          /* negro azulado */
  --background-bottom: #1a1528;       /* púrpura oscuro */
  --accent: #ff7b00;                  /* calabaza */
  --accent-soft: rgba(255,123,0,0.24);
  --glow: rgba(255,180,60,0.36);
  --text-muted: rgba(250,235,210,0.90);
}

body[data-theme="easter"] {
  --background-top: #1a1433;          /* violeta pastel */
  --background-bottom: #2e2658;       /* violeta medio */
  --accent: #ffd1e8;                  /* rosa huevo */
  --accent-soft: rgba(255,209,232,0.24);
  --glow: rgba(255,220,240,0.36);
  --text-muted: rgba(255,245,250,0.92);
}

body[data-theme="dawn"] {
  --background-top: #121426;          /* noche morada */
  --background-bottom: #352b66;       /* pre-amanecer púrpura */
  --accent: #ffa47a;                  /* naranja rosado amanecer */
  --accent-soft: rgba(255,164,122,0.24);
  --glow: rgba(255,190,150,0.36);
  --text-muted: rgba(255,245,240,0.90);
}

body[data-theme="galaxy"] {
  --background-top: #0b0b1e;
  --background-bottom: #1c1344;
  --accent: #b787ff;                  /* lila cósmico */
  --accent-soft: rgba(183,135,255,0.24);
  --glow: rgba(210,175,255,0.36);
  --text-muted: rgba(240,235,255,0.92);
}

body[data-theme="newyear"] {
  --background-top: #0b0b18;
  --background-bottom: #1f1a3a;
  --accent: #ffd54f;                  /* dorado champagne */
  --accent-soft: rgba(255,213,79,0.22);
  --glow: rgba(255,241,118,0.34);
  --text-muted: rgba(255,250,230,0.90);
}

body[data-theme="valentine"] {
  --background-top: #1a0b1a;          /* violeta borgoña */
  --background-bottom: #3a1438;       /* magenta profundo */
  --accent: #ff4d88;                  /* rosa intenso */
  --accent-soft: rgba(255,77,136,0.24);
  --glow: rgba(255,160,190,0.36);
  --text-muted: rgba(255,235,245,0.90);
}

body[data-theme="christmas"] {
  --background-top: #0a1630;          /* azul noche frío */
  --background-bottom: #0d233f;       /* azul profundo */
  --accent: #e53935;                  /* rojo navidad */
  --accent-soft: rgba(46,160,67,0.24);/* verde pino translúcido para halo/ground */
  --glow: rgba(255,210,92,0.36);      /* dorado festivo */
  --text-muted: rgba(255,245,230,0.92);

  /* opcional para nieve */
  --snow-color: rgba(255,255,255,0.92);
  --snow-speed: 22s;
}


/* Oculto inicial */
.hidden { display: none !important; }

/* Base */
html, body { height: 100%; margin: 0; color: #fff; font-family: var(--font-ui); }
body { background: linear-gradient(180deg, var(--background-top), var(--background-bottom)); overflow: hidden; display: flex; align-items: center; justify-content: center; }

/* HUD */
.hud { position: fixed; top: 12px; right: 12px; z-index: 60; display: flex; gap: 8px; align-items: center; }
.theme-toggle,
.sound-toggle { padding: 8px 10px; border-radius: 10px; border: 1px solid rgba(255,255,255,0.2); background: var(--panel-bg); color: #fff; font-size: 14px; backdrop-filter: blur(6px); }
.theme-toggle { font-weight: 600; cursor: pointer; }
.theme-toggle:hover { filter: brightness(1.08); }
.theme-toggle:focus { outline: 2px solid var(--accent); outline-offset: 2px; }
.sound-toggle input { accent-color: var(--accent); }

/* Picker */
.character-picker { position: fixed; bottom: 16px; right: 12px; z-index: 60; display: grid; gap: 12px; padding: 12px; border-radius: 12px; background: var(--panel-bg); backdrop-filter: blur(6px); border: 1px solid var(--panel-border); }
.picker-group { display: grid; gap: 8px; }
.picker-title { font-weight: 700; font-size: 12px; color: var(--text-muted); letter-spacing: 0.06em; }
.picker-buttons { display: grid; grid-template-columns: repeat(4, auto); gap: 6px; }
.picker-buttons button { display: inline-flex; align-items: center; gap: 8px; padding: 6px 10px; font-size: 12px; color: #fff; background: rgba(40,40,54,0.55); border: 1px solid var(--panel-border); border-radius: 10px; cursor: pointer; }
.picker-buttons button.active { border-color: var(--accent); box-shadow: 0 0 0 2px rgba(255,255,255,0.06) inset; }
.thumb-wrap { width: 24px; height: 24px; border-radius: 6px; overflow: hidden; display: inline-flex; align-items: center; justify-content: center; background: rgba(255,255,255,0.08); }
.mini-thumb { width: 100%; height: 100%; object-fit: cover; }

/* Letterbox */
.letterbox { position: fixed; left: 0; right: 0; height: 10vh; background: linear-gradient(180deg, rgba(0,0,0,0.95), rgba(0,0,0,0.6)); z-index: 40; pointer-events: none; }
.letterbox.top { top: 0; }
.letterbox.bottom { bottom: 0; }

/* Escena */
.stage { position: relative; width: 100vmin; max-width: 1200px; aspect-ratio: 16/9; perspective: 900px; transform-style: preserve-3d; filter: contrast(1.05) saturate(1.05); }
.frame { position: absolute; inset: 0; transform-origin: center; animation: cinematicPan 8s ease-in-out infinite; }
@keyframes cinematicPan { 0%{transform:translateZ(0) scale(1) rotateY(0)} 50%{transform:translateZ(24px) scale(1.035) rotateY(-1.2deg)} 100%{transform:translateZ(0) scale(1) rotateY(0)} }
@media (prefers-reduced-motion: reduce) { .frame, .grain, .heart, .kiss-point, .scene-img { animation: none !important; } }

/* Atmósfera */
.halo { position: absolute; left: 50%; top: 30%; transform: translateX(-50%); width: 64%; height: 40%; background: radial-gradient(ellipse at center, var(--accent-soft), transparent 48%); filter: blur(42px); pointer-events: none; z-index: 2; }
.stars { position: absolute; inset: 0; background:
  radial-gradient(circle at 20% 30%, rgba(255,255,255,0.12) 0 2px, transparent 3px),
  radial-gradient(circle at 80% 25%, rgba(255,255,255,0.10) 0 2px, transparent 3px),
  radial-gradient(circle at 55% 12%, rgba(255,255,255,0.14) 0 1.5px, transparent 2px),
  radial-gradient(circle at 70% 60%, rgba(255,255,255,0.08) 0 2px, transparent 3px);
  opacity: 0.6; mix-blend-mode: screen; z-index: 1;
}
.ground { position: absolute; left: 50%; bottom: 7%; transform: translateX(-50%); width: 92%; height: 15%; background: radial-gradient(ellipse at center, var(--accent-soft), transparent 42%); filter: blur(22px); z-index: 5; }

/* Protagonistas */
.images { position: absolute; inset: 0; z-index: 10; display: grid; grid-template-columns: 1fr 40px 1fr; align-items: center; justify-items: center; }
.img-card { display: flex; flex-direction: column; align-items: center; gap: 10px; width: var(--card-w); }
.img-left  { transform: translateX(-2vmin) rotateY(8deg); }
.img-right { transform: translateX( 2vmin) rotateY(-8deg); }
.scene-img {
  width: 100%;
  aspect-ratio: var(--card-ratio);
  object-fit: contain;
  border-radius: 14px;
  filter: drop-shadow(0 10px 24px rgba(0,0,0,0.55));
  background: rgba(255,255,255,0.02);
  outline: 1px solid rgba(255,255,255,0.06);
  outline-offset: -1px;
}
.img-label {
  font-size: 13px; letter-spacing: 0.04em; color: var(--text-muted);
  padding: 6px 10px; border-radius: 10px;
  background: rgba(20,20,30,0.35); border: 1px solid rgba(255,255,255,0.14);
  backdrop-filter: blur(4px); text-shadow: 0 1px 2px rgba(0,0,0,0.35);
}

/* Galería (oculta por defecto) */
.images-gallery {
  position: absolute; left: 50%; bottom: 12%; transform: translateX(-50%);
  display: grid; grid-template-columns: repeat(6, var(--card-w)); gap: var(--gallery-gap);
  z-index: 12;
}

/* Centro romántico */
.focus { position: relative; width: 1px; height: 1px; }
.kiss-point { position: absolute; width: 12px; height: 12px; border-radius: 50%; background: radial-gradient(circle, #fff, var(--accent)); left: 50%; top: 46%; transform: translate(-50%, -50%) scale(0); z-index: 20; box-shadow: 0 0 18px var(--glow); animation: kissHighlight 4s ease-in-out infinite; }
@keyframes kissHighlight { 0%,30%{transform:translate(-50%,-50%) scale(0); opacity:0} 45%{transform:translate(-50%,-60%) scale(1.02); opacity:1} 55%{transform:translate(-50%,-50%) scale(0.92); opacity:0.9} 70%,100%{transform:translate(-50%,-50%) scale(0); opacity:0} }
.heart { position: absolute; left: 50%; top: 40%; transform: translate(-50%,-50%) scale(0); font-size: 24px; color: var(--accent); text-shadow: 0 6px 20px var(--glow); animation: heartBeat 2s ease-in-out infinite; z-index: 25; }
@keyframes heartBeat { 0%,35%{transform:translate(-50%,-50%) scale(0); opacity:0} 45%{transform:translate(-50%,-60%) scale(1.12); opacity:1} 55%{transform:translate(-50%,-50%) scale(0.92); opacity:0.9} 70%,100%{transform:translate(-50%,-50%) scale(0); opacity:0} }

/* Grano + pie */
.grain { position: absolute; inset: 0; z-index: 50; pointer-events: none; background-image: linear-gradient(transparent, rgba(0,0,0,0.02)), repeating-linear-gradient(90deg, rgba(255,255,255,0.015), rgba(255,255,255,0.015) 1px, transparent 1px, transparent 3px); mix-blend-mode: overlay; opacity: 0.6; animation: grainShift 5s linear infinite; }
@keyframes grainShift { from { transform: translateY(0); } to { transform: translateY(100%); } }
.caption { position: absolute; left: 50%; bottom: 3.8vh; transform: translateX(-50%); color: var(--text-muted); font-size: 14px; z-index: 45; letter-spacing: 0.08em; font-family: var(--font-caption); text-shadow: 0 1px 2px rgba(0,0,0,0.4); }

/* Responsive */
@media (max-width: 900px) {
  :root { --card-w: clamp(160px, 28vmin, 260px); --gallery-gap: 14px; }
  .images-gallery { bottom: 10%; grid-template-columns: repeat(3, var(--card-w)); }
}
@media (max-width: 600px) {
  :root { --card-w: clamp(140px, 34vmin, 220px); --gallery-gap: 12px; }
  .images { grid-template-columns: 1fr 24px 1fr; }
  .images-gallery { bottom: 9%; grid-template-columns: repeat(2, var(--card-w)); }
  .picker-buttons { grid-template-columns: repeat(2, auto); }
  .caption { font-size: 13px; }
}
